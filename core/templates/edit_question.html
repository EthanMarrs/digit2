{% extends "admin/base_site.html" %}
{% block coltype %}flex{% endblock %}
{% block content %}

{% load static %}
{% load humanize %}
{% load widget_tweaks %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'core/style.css' %}"/>
<link rel="stylesheet" type="text/css" href="/static/admin/css/forms.css"/>
<link rel="stylesheet" type="text/css" href="{% static 'core/mathquill.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'core/questionForm.css' %}"/>
{% endblock %}

<script src="{% static 'core/jquery.min.js' %}"></script>
<script src="{% static 'core/jquery.cookie.js' %}"></script>
<script src="{% static 'core/events.js' %}"></script>

<script src="{% static 'core/mathquill.min.js' %}"></script>
<script src="{% static 'core/uuid.js' %}"></script>
<script src="{% static 'core/questionForm.js' %}"></script>

<div class="module full-width">
    <p><b>State: </b>{{ question.get_state }}</p>
    <div id="edit-panel">
        <h3>Question</h3>
        <div class="question_content">
          <!-- question content will be appended here -->
        </div>
        <span>
          <button type="button" onClick="addEquationField('.question_content', '')">Add Equation</button>
          <button type="button" onClick="addTextField('question_content')">Add Text</button>
          <button type="button" onClick="addImageField('question_content')">Add Image</button>
        </span>

        <h3>Answer Explanation</h3>
        <div class="answer_explanation_content">
            <!-- answer explanation content will be appended here -->
        </div>
        <span>
          <button type="button" onClick="addEquationField('.answer_explanation_content', '')">Add Equation</button>
          <button type="button" onClick="addTextField('answer_explanation_content')">Add Text</button>
          <button type="button" onClick="addImageField('answer_explanation_content')">Add Image</button>
        </span>

        <h3>Additional Information</h3>
        <div class="additional_information">
            <!-- additional information content will be appended here -->
        </div>

        <span>
          <button type="button" onClick="addEquationField('.additional_information', '')">Add Equation</button>
          <button type="button" onClick="addTextField('additional_information')">Add Text</button>
          <button type="button" onClick="addImageField('additional_information')">Add Image</button>
        </span>

        <h3>Options</h3>

        <div class="options">

          <h4>Option 1</h4>
          <div class="option_content_1" >
            <!-- option 1 content will be appended here -->
          </div>
          <span>
            <button type="button" onClick="addEquationField('.option_content_1', '')">Add Equation</button>
            <button type="button" onClick="addTextField('option_content_1')">Add Text</button>
            <button type="button" onClick="addImageField('option_content_1')">Add Image</button>
          </span>

          <h4>Option 2</h4>
          <div class="option_content_2">
            <!-- option 2 content will be appended here -->
          </div>
            <button type="button" onClick="addEquationField('.option_content_2', '')">Add Equation</button>
            <button type="button" onClick="addTextField('option_content_2')">Add Text</button>
            <button type="button" onClick="addImageField('option_content_2')">Add Image</button>

          <h4>Option 3</h4>
          <div class="option_content_3">
            <!-- option 3 content will be appended here -->
          </div>
            <button type="button" onClick="addEquationField('.option_content_3', '')">Add Equation</button>
            <button type="button" onClick="addTextField('option_content_3')">Add Text</button>
            <button type="button" onClick="addImageField('option_content_3')">Add Image</button>

          </div>
      </div> <!-- end of option div -->
    <div id="preview-panel">

    </div>
    <div class="module">
        &nbsp;
    </div>
    <div class="comments">
        {% for comment in question.get_comments %}
        <div>
            <p class="float-left large-p"><b>{{ comment.user.get_full_name }}</b></p>
            <p class="float-left small-p grey-text">{{ comment.created_at|naturaltime }}</p>
            <p class="clear">{{ comment.text }}</p>
        </div>
        {% endfor %}
        <form action="/comments/" method="post">
            {% csrf_token %}
            {{ form.text }}
            {{ form.text.errors }}
            {% render_field form.question_id value=question.id %}
            <input class="float-right" type="submit" value="Comment"/>
        </form>
    </div>

    <div class="module">
        &nbsp;
    </div>
    <div class="module">
        &nbsp;
    </div>
    <div class="submit-row">
        <input type="submit" value="Save and send to moderator" >
        <input type="submit" value="Save and continue editing" >
        <input class="default" type="submit" onClick="postInfo()" >
    </div>
</div>

{% endblock %}
